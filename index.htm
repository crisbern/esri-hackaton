<!DOCTYPE html>
<html>
<head>
	<title>ESRI Hackaton</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	 <link rel="stylesheet" href="./libs/leaflet-0.7.2/leaflet.css" />
	 <link rel="stylesheet" href="./css/main.css" />
</head>
<body>
	<div id="map" ></div>
	<script src="./libs/jquery-1.11.1.min.js"></script>
	<script src="./libs/leaflet-0.7.2/leaflet.js"></script>
	<script src="./libs/esri-leaflet/esri-leaflet.js"></script>
	<script>
		//initialize variables
		var center = [41.9000, 12.5000];
		var map_url = 'http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/';//url must end with /
		var map_attribution = '  Sources: Esri, HERE, DeLorme, TomTom, Intermap, increment P Corp., GEBCO, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), swisstopo, MapmyIndia, Â© OpenStreetMap contributors, and the GIS User Community ';
		//set center in Rome
		var map = L.map('map').setView(center, 10);
		
		//add topographic map
		L.tileLayer(map_url+'MapServer/tile/{z}/{y}/{x}', {
			attribution: map_attribution,
			minZoom: 3
		}).addTo(map);
		
		//add heritage sites
		var template = "<h3>{name_en}</h3><p>{short_description_en}<br/><a href=\"javascript:viewphoto({latitude},{longitude});\">View photos</a></p>";

		L.esri.featureLayer("http://services.arcgis.com/RhGiohBHzSBKt1MS/arcgis/rest/services/World_Heritage_Sites/FeatureServer/0", {
       		style: function (feature) {
          		return { color: "#70ca49", weight: 2 };
        	},
        	onEachFeature: function (feature, layer) {
          		layer.bindPopup(L.Util.template(template, feature.properties));
          		console.log(uneval(feature.properties));
        	}
      	}).addTo(map);
      	
      	function viewphoto (latitude, longitude){
      		console.log(latitude+ " "+longitude);
      	}
	</script>
</body>
</html>
